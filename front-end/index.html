<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>TV Shows</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>

    <h1>Tabla de TV Shows</h1>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Código</th>
                <th>Nombre</th>
                <th>Director</th>
                <th>Investment</th>
                <th>cast</th>
                <th>Versión</th>
            </tr>
        </thead>
        <tbody id="tvShowTableBody"></tbody>
    </table>
    <button id="enviarBtn">Enviar</button>
    <button id="consultaBtn">Consulta</button>

    <script>
        
        const tvshow = [
        {
        id: 1,
        code: 23,
        name: "",
        director: "",
        investment: 40,
        cast:23,
        version:1
        
    },
    {
        id: 2,
        code: 12,
        name: "",
        director: "",
        investment: 40,
        cast:23,
        version:1
    },
    {
        id: 3,
        code: 19,
        name: "",
        director: "",
        investment: 40,
        cast:23,
        version:1
    },
    {id: 4,
    code: 17,
    name: "",
    director: "",
    investment: 40,
    cast:23,
    version:1
    },

    {  id: 5,
        code: 65,
        name: "",
        director: "",
        investment: 40,
        cast:23,
        version:1
    },
    {id: 6,
    code: 1,
    name: "",
    director: "",
    investment: 40,
    cast:23,
    version:1
},
{id: 7,
code: 54,
name: "",
director: "",
investment: 40,
cast:23,
version:1
},
{  id: 8,
    code: 33,
    name: "",
    director: "",
    investment: 40,
    cast:23,
    version:1
},
{  id: 9,
    code: 12,
    name: "",
    director: "",
    investment: 40,
    cast:23,
    version:1
},
{
    id: 10,
    code: 9,
    name: "",
    director: "",
    investment: 40,
    cast:23,
    version:1
}

        ];
        //tabla
        const tableBody = document.getElementById('tvShowTableBody');

        tvshow.forEach(tvshow => {
            const row = document.createElement('tr');

            for (const prop in tvshow) {
                if (tvshow.hasOwnProperty(prop)) {
                    const cell = document.createElement('td');
                    cell.textContent = tvshow[prop];
                    row.appendChild(cell);
                }
            }
            tableBody.appendChild(row);
        });
        
        const enviarBtn = document.getElementById('enviarBtn');
        const consultaBtn = document.getElementById('consultaBtn');

        //botón "Enviar"
        enviarBtn.addEventListener('click', async () => {
            try {
                const response = await fetch('http://localhost:5500/api/tvshows/insert-massive', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'app/json',
                    },
                    body: JSON.stringify(tvshow),
                });

                if (response.ok) {
                    const result = await response.json();
                    console.log(result);
                    alert('Inserción masiva exitosa');
                } else {
                    console.error('Error en la inserción masiva:', response.statusText);
                    alert('Error');
                }
            } catch (error) {
                console.error('Error en la solicitud:', error);
                alert('Error en la solicitud');
            }
        });

        // botón "Consulta"
        consultaBtn.addEventListener('click', async () => {
            try {
                const response = await fetch('http://localhost:5500/api/tvshows/get-all');

                if (response.ok) {
                    const result = await response.json();
                    console.log(result);

                    // Mostrar los datos en una alerta (puedes personalizar esta parte)
                    alert(JSON.stringify(result));
                } else {
                    console.error('Error en la consulta:', response.statusText);
                    alert('Error en la consulta');
                }
            } catch (error) {
                console.error('Error en la solicitud:', error);
                alert('Error en la solicitud');
            }
        });
    </script>

</body>
</html>
    </script>
</body>
</html>
